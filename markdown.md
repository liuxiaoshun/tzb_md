# **摘**  **要**
&emsp;&emsp;蒙皮是构成飞行器气动外形的核心部件。为增加油漆的附着力从而保障蒙皮性能与安全，在喷漆前蒙皮必须进行全型面的磨抛活化。当前国内蒙皮磨抛活化完全依赖人工作业，不仅费时费力（C919型客机需30人打磨3工作日），且磨抛质量难保证。机器人化制造是大型构件智能制造的发展方向。然而，当前固定基座式工业机器人以及AGV搭载机械臂式的移动操作机器人，均受限于作业空间，无法实现对蒙皮的全型面覆盖。因此，业界亟需提出一种变革性的智能加工方式。
&emsp;&emsp;吸附式移动加工机器人具有超大的工作空间和灵活的部署模式，为飞机蒙皮磨抛提供了新的解决思路。然而，为实现轻质化需求，飞机蒙皮多为铝合金和复合材料材质，因此常规的磁吸附方式无法实行；同时为满足空气动力学性能需求，蒙皮表面为曲率变化的自由曲面。而传统的真空吸附腔只能吸附平面等定曲率表面，在变曲率曲面上极易出现真空泄露导致脱附。此外，由于蒙皮表面积巨大，而业界对磨抛质量的一致性要求极高，如何利用吸附式移动机器人在如此大范围内实现无遗漏、无重复的高一致性磨抛也是一大挑战。
&emsp;&emsp;针对以上挑战，我们Focus-Flimber团队本科生耗时两年，研制了一种能吸附在变曲率蒙皮表面上进行移动加工作业的机器人系统，其创新之处在于：（1）研制了主/被动融合的变曲率表面柔性吸附单元，实现了吸附式移动机器人在大尺寸、曲率连续大范围变化表面的稳定移动吸附。（2）设计了具有位姿感知能力的恒力磨抛执行器，在实现曲面恒力磨抛的同时，感知、记录打磨路径，实现全型面的路径覆盖。
&emsp;&emsp;本作品有重大的实用价值与广阔的市场前景。除航空制造业中蒙皮等大型薄壁工件的磨抛作业外，还可在大型船舶喷砂除锈、风电叶片磨抛修复、大型桥梁维保等任务中应用，支撑众多战略支柱行业中核心零部件的制造与维护。在此基础上可构建多机协同的吸附式移动加工机器人集群加工系统，实现大型构件“蚂蚁啃骨头”式的高效高品质加工，助力我国战略支柱行业中大型复杂构件的加工模式变革。
# 第一部分  研究背景
## 1.1   作品背景
&emsp;&emsp;大型复杂构件，如飞机蒙皮、高铁车身、舰船船体、风电叶片等，是航空、交通与能源等战略支柱产业的核心部件。蒙皮作为典型的大型复杂构件是保障飞行器安全与空气动力学性能的关键。为保障蒙皮漆面的附着力和一致性，在喷漆前必须对蒙皮基材进行全型面磨抛活化。而目前国内的蒙皮磨抛工序完全依赖人工作业，存在以下缺陷：（1） 费时费力，目前国内蒙皮的打磨工序完全采用人工，效率低下，以本作品的其需求方、合作企业上海飞机制造有限公司的C919客机打磨为例，一架C919客机的磨抛活化需要30人打磨三个工作日，而漆面的喷涂时间仅耗时一天，打磨工序耗时占比75%。且打磨时产生的粉尘和碎屑对人体危害极大。（2）质量难保证，以C919为例，蒙皮待打磨区域多达600m2，且要求所有区域保持较高的磨抛一致性，人工加工完全依赖于工人自身的技术水平和身体状况，蒙皮的表面磨抛质量一致性难以保障。
&emsp;&emsp;近年来，我国航空制造业需求日益旺盛，国产化趋势日趋明显：国产大型客机C919订单总数超过800架，预测到 2030 年我国大约还需要新增干线、支线客机超 3000架；未来十年需换装以歼-20、运-20 等为代表的先进战机及运输机千余架。因此，航空制造业亟需提高产能，匹配日益扩大的市场需求。本作品正是为了缩短蒙皮磨抛活化加工周期而提出，以此来服务于整体产能的提升。
&emsp;&emsp;机器人化制造是智能制造的发展趋势，为航空制造业的发展提供了新的启示。相比于大型机械臂式的机器人加工，具备吸附移动能力的爬壁式移动加工机器人，具有超大的工作空间和灵活的部署模式，可实现“蚂蚁噬骨”式的多机器人集群加工模式，为航空制造业的蒙皮加工提供新的解决方案。在此背景下，本项目提出了一种能吸附在变曲率蒙皮构件表面上进行移动加工作业的机器人系统。
## 1.2   国内外研究现状
&emsp;&emsp;目前针对于吸附式移动加工机器人存在的吸附方式主要有磁吸附和负压吸附两种。在国外，ROBOPLANT公司推出了用于储罐厚度测量的爬壁机器人ALTISCAN,以磁履带的形式使机器人吸附于金属件表面；而HOBOT公司则面向家用平面玻璃，推出了HOBOT-388负压吸附式清洗机器人。但整体来看，国外对于实际加工制造场景所研发的吸附式机器人采用磁吸附为主，负压吸附方式仅在诸如平面清洗等定曲率表面的加工有所商业化发展。相比国外吸附式机器人的商业化应用，其在国内仍处于研究阶段，且以磁吸附形式为主。如浙江省特科院于2020年推出的金属球罐吸附式打磨机器人采用轮式磁体的吸附方式；哈工大特种机器人团队开发的集装箱壁面吸附机器人采用履带式磁体吸附技术。
&emsp;&emsp;同时，当前对于负压吸附的吸附结构设计而言，大多仍然采用圆形吸盘的形式。为保持吸盘内的气密性，美国物理研究所则在圆形吸盘的边缘通以高速旋转的水流，用水流的离心力来防止腔内空气的泄露。国内的吴善强等人提出在吸附腔附近加封一圈裙边，以实现在凹凸平面的有效吸附。但以上措施都仅面向于定曲率场景，并未对变曲率场景的稳定媳妇进行针对性的设计。
&emsp;&emsp;此外，现有的磨抛执行器仅能实现变曲率表面的恒力磨抛，如南宁宇立仪器有限公司研发的“iGrinder”轻型浮动磨头就可根据轴向的恒力进行浮动，但无法对打磨路径进行感知，造成部分区域的漏打磨与重打磨。
&emsp;&emsp;从以上现状来看，目前对机器人的吸附方案设计有较大局限，如：磁吸附方式虽然有较好的吸附能力和越障能力，但**仅能吸附于磁性工件表面，吸附适用性差**；负压吸附虽然能够吸附于非磁性材质工件上，但目前对其研究仍集中在定曲率表面上，**无法在变曲率表面稳定吸附**。同时，国内外现有的爬壁机器人以遥控操作为主，**缺乏全局定位和路径跟踪能力**，**难以满足大尺寸构件全型面覆盖加工的效率和精度要求**。总的来说，**其发展现状无法满足诸如飞机蒙皮等非磁性材质、变曲率、大尺寸构件的磨抛作业，尚未实现爬壁机器人在大范围下的低成本、高精度导航定位和路径跟踪，难以保证加工区域的全型面覆盖及加工质量的一致性**。
# 第二部分  作品设计
## 2.1   技术突破与解决方案
&emsp;&emsp;为实现吸附式移动加工机器人在飞行器蒙皮基材上的磨抛活化作业，需攻克以下两大技术难题。
### 2.1.1 技术挑战
**1）变曲率曲面吸附**
&emsp;&emsp;飞行器蒙皮为满足空气动力学特性需求，机身各个区域的曲率半径一般为1.6m到8m不等。而当前爬壁机器人最常用的磁吸附方式无法吸附在以复合材料和铝合金为材质的飞机蒙皮上；而现有的负压吸附机器人的吸附能力只能适应平直平面或定曲率曲面，无法适应变曲率曲面。因此，吸附式机器人的变曲率曲面吸附是亟需解决的一个技术难题。
 **2）飞机蒙皮的全型面一致打磨**
 &emsp;&emsp;飞机蒙皮对磨抛的质量一致性要求极高，具体来讲就是全部型面的轮廓平均偏差波动在±1.6微米以内，同时大型客机尺寸极大，国产大飞机C919整机长38m，需要加工的范围极大。而表面一致性指标不同于精度，是一个统计量，加工的范围越大，控制粗糙度的波动就越困难。因此保证蒙皮的全型面打磨质量一致性是面临的另一个重大挑战。
### 2.1.2 变曲率表面稳定吸附的解决方案
&emsp;&emsp;本项目提出的吸附式移动加工机器人在结构上采用具有顺应能力的柔性真空吸附腔来顺应曲面。此外，依托吸附腔主动调整机构，吸附式移动加工机器人可实时根据所处表面的曲率调整吸附腔姿态，保持吸附腔轴向与曲面法向平行，从而保证变曲率情况下吸附腔唇边与曲面紧密贴合，有效解决了传统真空吸附形式在变曲率表面适应能力差的问题，提高了吸附式机器人吸附能力的稳定性和适应性。
### 2.1.3 蒙皮加工一致性的解决方案
&emsp;&emsp;本项目设计了具有位姿感知的恒力磨抛执行器来实现蒙皮表面的一致性打磨。本项目提出的磨抛执行器集成了视觉里程计、光流传感器和惯性测量单元，能够测量自身位姿，以此记录打磨路径，从而实现不重不漏的打磨，同时该磨抛执行器也能保证恒定的打磨压力。基于以上两点，该磨抛执行器能够实现恒力恒速的高品质、全型面磨抛作业。
### 2.1.4 对大范围、低成本、高精度定位的解决
&emsp;&emsp;区别于OptiTrack的摄像机阵列定位系统，本项目开发了一种利用二维码视觉标签与机载相机的视觉定位算法。该方法仅需在机器人上安装一台相机，码标签可分多个布置于加工场地周围。此种方法不仅布置成本低、布置占用空间小，而且能够很好适应不同尺寸蒙皮的加工场景，实现大范围精确定位。
## 2.2   总体设计思路
&emsp;&emsp;为使吸附式机器人适应大尺寸、变曲率工件表面的加工作业，本项目从变曲率表面稳定负压吸附、保持加工质量一致性和大范围精确定位入手，对负压吸附结构和末端加工执行器进行了创新设计，并结合大范围定位系统，实现了恒力全型面覆盖磨抛。
&emsp;&emsp;针对现有负压吸附式爬壁机器人难以在变曲率表面稳定吸附的问题，本项目设计了一个集柔性吸附腔、吸附腔唇边和主动调整机构为一体的主动顺应负压吸附模块。
&emsp;&emsp;针对现有加工机器人难以在变曲率表面保证打磨质量一致的问题，本项目提出了一种利用恒定气压被动顺应曲面的打磨机构，保持变曲率表面上单次路径的打磨厚度一致。
&emsp;&emsp;在实现以上两点的基础上，本项目将视觉里程计、光流传感器和惯性测量单元集成到打磨机构中，形成了一种“感控一体的智能加工执行器”，以此来实现加工路径对全型面的精确覆盖，保障不重不漏的打磨作业。
&emsp;&emsp;以上述设计思路为本项目的基本参考，整个机器人系统包含基于舵轮的移动模块、主动顺应吸附模块、感控一体的智能打磨模块和实现人机间信息交互的交互模块。在控制算法层面设计了视觉标签定位算法、轨迹规划及跟踪算法和交互软件等。其它各类结构和控制均在以上所列关键点中具体展开。
![1](/all_static/media/markdown/43/images/2021/05/29/20/36/负压吸附式移动加工机器人.png "1")
&emsp;&emsp;图1 整体设计思路
![2](/all_static/media/markdown/43/images/2021/05/29/20/48/12.jpg "2")
&emsp;&emsp;图2 整机总体设计
## 2.3   作品科学性及先进性
### 2.3.1 作品的科学性
&emsp;&emsp;针对吸附问题，本项目设计了主-被动复合吸附机构：调整机构采用多个并联的直线驱动机构，通过调节吸附腔姿态来**保持吸附腔轴向与曲面法向平行；**柔性吸附腔由PVC和尼龙布构成，能够适应较小的曲率变化；吸附腔柔性唇边可覆盖表面的小突起，保证吸附腔良好的气密性。已通过实验验证机器人吸附腔的真空度可达15%以上，提供的吸附力能够满足磨抛和无损检测作业的使用要求。
&emsp;&emsp;针对打磨问题，本作品设计了具有位姿感知的恒力磨抛执行器：对惯性测量单元、光流传感器和相机采用多传感器融合技术，得到位姿的最优估计，实现了低成本高精度的定位，从而实现精准的轨迹跟踪，保证蒙皮全型面覆盖；气动力控活塞保证打磨头的恒定压力输出，并与曲面自适应贴合，实现恒力打磨。
### 2.3.2 作品的先进性
&emsp;&emsp;首先，本作品在加工模式上具有先进性：相比于人工打磨的效率低下和质量难保证，以及大型磨抛机械臂价格昂贵等问题，本作品提出的吸附式移动加工机器人能够在保障加工质量一致以及加工效率的同时，降低加工成本。
&emsp;&emsp;其次，本作品在技术上也具有较高的先进性：提出的主-被动复合吸附机构实现了机器人在变曲率、非磁性蒙皮上的稳定吸附；比于现有的打磨执行器，本作品的磨抛执行器在保证恒力打磨的同时具备位姿感知能力，可实现蒙皮全型面覆盖的高一致性打磨。
## 2.4   主要创新点
### 2.4.1 变曲率表面自适应吸附
&emsp;&emsp;本项目设计的曲面主动顺应吸附模块包括：能够贴合凹凸加工表面的吸附腔柔性唇边、具备曲面顺应能力的柔性吸附腔和主动顺应变曲率表面的调整机构。解决了目前大多负压式吸附机器人无法在变曲率表面稳定吸附的问题，有助于搭载各类不同的具备较大加工反作用力的末端执行器，拓展现有吸附式加工机器人的应用场景。
### 2.4.2 感控一体的全型面一致磨抛
&emsp;&emsp;本作品在被动顺应打磨机构上集成了视觉里程计、光流传感器和惯性测量单元，组成的磨抛执行器能够实现机器人位姿的感知。在被动顺应打磨机构利用恒定气压保持单次打磨质量一致的同时，以多传感器融合技术得到打磨头位姿的最优估计，实现了打磨路径的全型面不重不漏的覆盖。
### 2.4.3 高精度、低成本、大范围视觉定位系统
&emsp;&emsp;本作品采用了一种基于二维码视觉标签的视觉定位系统,实现在诸如大型飞机、船舶等大尺寸加工构件的高精度、低成本定位。该系统由机载单目视觉相机和纸质场地视觉标签构成，在确保视觉标签能被机载相机识别的基础上，可标签灵活布置于场地周围。纸质视觉标签降低了定位系统的成本，简单的布置、标定流程，可依据加工构件的尺寸而灵活布置。
# 第三部分  具体设计方案
## 3.1   主要技术指标
![baio1](/all_static/media/markdown/43/images/2021/05/31/19/30/屏幕截图2021-05-31192526.png "baio1")
## 3.2   整体设计
&emsp;&emsp;本作品的设计主要依据以下两大侧重点而展开：（1）具备主动顺应变曲率表面能力的吸附模块；（2）具有位姿感知能力和单自由度力控被动顺应能力的磨抛执行器。通过对吸附结构、末端加工执行器和定位控制算法的设计，从结构上突破了现有负压吸附式机器人的变曲率表面稳定吸附、变曲率一致打磨等难题，在系统控制方面实现了机器人的大范围定位、加工路径精确覆盖全型面和软件交互控制等功能。
![3](/all_static/media/markdown/43/images/2021/05/29/20/55/13.png "3")
&emsp;&emsp;图3 设计拓扑图
![3](/all_static/media/markdown/43/images/2021/05/30/16/20/13.jpg "3")
&emsp;&emsp;图4 实物展示图
&emsp;&emsp;该负压吸附式移动加工机器人工作流程如下：
&emsp;&emsp;1）在待加工构件周围布置视觉标签并进行机器人视觉相机参数标定；
&emsp;&emsp;2）将吸附模块中的主动调整机构复位，启动风机后，手动将机器人放置于工件表面;
&emsp;&emsp;3）机器人通过各类传感器自主调整吸附腔姿态，并对规划路径进行精确跟踪；
&emsp;&emsp;4)  机器人的各类工作状态参数实时回传到交互软件，操作人员既可指定加工区域让机器人自主规划路径，也可通过交互软件遥控操作。
## 3.3   机械结构设计
&emsp;&emsp;本作品的主要机械结构设计部分包括主动顺应吸附模块、感控一体的智能磨抛模块和三舵轮均布式移动模块。
### 3.3.1 主动顺应吸附模块结构设计
&emsp;&emsp;主动顺应吸附模块包括柔性吸附腔、主动调整机构和柔性唇边。其具体结构设计如下。
**1）柔性吸附腔设计：**
&emsp;&emsp;本作品设计了一种以尼龙布和PVC为材料的风琴状柔性吸附腔。该柔性吸附腔端板的形状可以随曲面曲率的变化而变化，始终保持吸附腔与曲面贴合，实现吸附腔内的真空度在15%以上。单个吸附腔在不同曲率的吸附情况下，可提供30~40 kgf的吸附力，该机器人在三个吸附腔的共同作用下最大吸附力可达1250N。
&emsp;&emsp;假设吸附腔全部吸附力由轮子支持，车体重量由摩擦力承担，吸附腔所产生的摩擦力可由以下公式计算得到。

$$f={\mu} \times N,M\leq \frac{3f}{N}$$

&emsp;&emsp;其中：
&emsp;&emsp;f：摩擦力。
&emsp;&emsp;M：车重，经过称重约 15Kg。
&emsp;&emsp;N：安全系数，取2。
&emsp;&emsp;代入公式计算：

$$M\leq36Kg$$

&emsp;&emsp;可知，本吸附腔的设计能有效保证机器人的安全稳定高效运行。
![5](/all_static/media/markdown/43/images/2021/05/30/15/28/15.png "5")
&emsp;&emsp;图 5柔性吸附腔
**2）主动调整机构设计：**
&emsp;&emsp;经多次实验，如果仅依靠柔性吸附腔来对曲面进行被动顺应，那么在遇到曲率变化过大的表面时极易产生气隙。本作品采用三套二自由度铰链结构和三套二自由度轴承结构作为调整机构，满足不同曲率曲面的顺应需求。根据曲面的形状约束，通过舵机控制不同滑动杆的不同伸缩长度，从而使吸附腔整体转动不同的角度来满足相应的位姿要求。
![6](/all_static/media/markdown/43/images/2021/05/30/15/29/16.png "6")
&emsp;&emsp;图 6主动调整机构
**3）柔性唇边设计：**
&emsp;&emsp;在飞机蒙皮上往往会有许多凸起的铆钉，为适应此类凹凸不平的工件表面，本作品设计了包裹于吸附腔底部的柔性唇边。唇边采用Ecoflex溶液凝固而成，制备方法简单、便捷，采用双凹槽多层次设计，每一凹槽宽3mm，唇边整体宽15mm，当遇到凸起铆钉顶起唇边时，多层唇边内壁能够形成新的密封腔，提升机器人的吸附稳定性。
![7](/all_static/media/markdown/43/images/2021/05/30/15/31/17.png "7")
&emsp;&emsp;图 7柔性唇边横截面实物图
**4）负压风机选型设计：**
&emsp;&emsp;经过多次实验，为了获得可靠的性能，同时降低成本，选用WM9250-24V负压风机，根据提供的资料:
![8](/all_static/media/markdown/43/images/2021/05/30/15/32/18.png "8")
&emsp;&emsp;图 8负压风机风压-风量图
&emsp;&emsp;该风机可以在一定风量（≤100L/min）的情况下，风压很高且基本不变，满足吸附设计要求。
### 3.3.2 感控一体的智能磨抛模块结构设计
&emsp;&emsp;本作品将力控被动顺应打磨结构与光流传感器、视觉里程计和惯性测量单元融合，在保证恒定打磨力的同时能够感知打磨路径，以此来避免全型面打磨时可能出现的漏打磨和重复打磨，提高了蒙皮表面打磨质量的一致性。具体结构设计如下：
&emsp;&emsp;以运动平台来带动气动打磨头在上、下固定板之间上下移动；运动平台另一端于活塞筒相连，活塞筒上固定有上、下通气嘴，为气动打磨机在曲面法向上压力的恒定提供气压输入；通过上、下通气嘴的压差实现气动打磨机对被打磨表面的压力恒定，运动平台在恒定气压下带动气动打磨机上下起伏来被动顺应变曲率曲面。
&emsp;&emsp;打磨机选型：选用BOOXT BX-288ZDL-5打磨机，工作压力0.65Mpa。
&emsp;&emsp;气缸选型：选用SMC CJ2F10-75型号气缸，缸径10mm，其压力范围为0.15Mpa~0.7Mpa。
![9](/all_static/media/markdown/43/images/2021/05/30/15/33/19.png "9")
&emsp;&emsp;图 9打磨机构及传感器布局示意图
### 3.3.3 三舵轮均布式移动模块结构设计
**1）舵轮结构设计：**
&emsp;&emsp;本团队在进行测试的过程中发现，全向轮和麦克纳姆轮在变曲率曲面的吸附状态下进行运动时，会产生严重的打滑现象，进而影响机器人的运动精度并对工件表面造成破坏。相比之下，舵轮结构不仅转向更加灵活，而且运动更加稳定、连续。基于以上对比，本机器人的驱动结构选用舵轮形式。
&emsp;&emsp;现有的舵轮结构主要分为卧式和立式两种。其中卧式结构过于臃肿，横向所占空间比较大；立式结构则会将整个机器人的底盘抬高，再抬高重心的同时，增加负压吸附腔的长度，对气密性的要求也更高。
&emsp;&emsp;针对现有舵轮的缺点，本作品结合立式和卧式舵轮的特点，设计了这款舵轮（如下图所示）。将舵轮分为转向模块和驱动模块两个部分：转向模块将回转支承中置于驱动轮上方，并将转向电机固连在舵轮主体垂向方向，降低了机器人底盘的高度；驱动模块将驱动电机横向放置在驱动轮轮子的上方，采用直齿圆柱齿轮传动，有效解决了卧式舵轮占用空间大的问题。
![10](/all_static/media/markdown/43/images/2021/05/30/15/36/20.png "10")
&emsp;&emsp;图 10舵轮示意图
**2）运动结构设计：**
&emsp;&emsp;电机设计：电机选用RoboMaster M3508 P19直流无刷电机，可以输出连续扭矩3N·m。
&emsp;&emsp;驱动轮设计：采用聚氨酯制作，与玻璃等光滑表面的摩擦系数为0.87，可以保证车体的快速安全移动。轮子直径设计为0.07m。
&emsp;&emsp;对扭矩计算：

$$M\leq\frac{N{\times}T{\times}I}{g{\times}Ns{\times}R}$$

&emsp;&emsp;其中：
&emsp;&emsp;T：电机输出扭矩 3N·m；
&emsp;&emsp;R：轮子半径，0.035m；
&emsp;&emsp;I：齿轮传动比，13:5；
&emsp;&emsp;N：电机个数，整车共有3个；
&emsp;&emsp;Ns：安全系数 取1.2；
&emsp;&emsp;g：重力加速度，取 9.8m/s2。
&emsp;&emsp;带入数据计算得：

$$M\leq56.8Kg$$

&emsp;&emsp;其中，车重约15kg，满足设计要求。
## 3.4   控制系统设计
### 3.4.1 控制总体要求
&emsp;&emsp;控制系统需要实现机器人的稳定吸附、机器人位姿的闭环控制以及开启和关闭打磨机。其中涉及的主要控制要求如下：
&emsp;&emsp;根据变曲率表面的倾斜角度和曲率调整吸附腔的位姿；
&emsp;&emsp;根据需要调整吸附腔的真空度；
&emsp;&emsp;机器人能够协调舵轮的转向和驱动使机器人能够移动到指定位置；
&emsp;&emsp;机器人能够启停打磨机；
&emsp;&emsp;能够通过上位机无线实时控制机器人的运动和作业；
### 3.4.2 总体控制方案
&emsp;&emsp;采用由Jetson nano作为主控，搭配STM32F407ZE驱动电路板的控制方案。Jetson nano负责算法的运算和TCP通信，包括Apriltag定位算法、多传感器融合算法等。驱动电路板负责底层驱动控制及底层通信，包括对舵轮电机、吸附腔风机、调整机构舵机等的控制。Jetson nano与驱动电路板之间通过串口通信。
&emsp;&emsp;上位机通过TCP协议将运动指令发送给Jetson nano，Jetson nano通过正定计算后将运动指令转换为驱动电路板的控制指令，驱动电路板根据控制指令驱动电机。同时，驱动电路板与舵轮电机、风机、调整机构舵机、惯性测量电源及光流传感器通信，控制调整机构和风机，使机器人位姿稳定且吸附力合适。驱动电路板读取惯性测量单元和光流传感器的数据进行航迹推算，并将其上传Jetson nano。Jetson nano接收航迹数据和摄像机的图像信息，借助图像信息运行Aprilatg算法，得到机器人的绝对位姿，将绝对位姿与航迹数据进行融合得到机器人位姿的最优估计。机器人速度的闭环控制也是由Jetson nano根据融合得到的机器人位姿数据实现的。机器人的位姿数据、吸附腔真空度、电机负载、打磨机负载等数据由Jetson nano反馈给上位机，上位机接收后进行实时显示。
### 3.4.3 运动控制模块
**1）调整机构控制**
&emsp;&emsp;调整机构通过控制三根伸缩杆的长度实现吸附腔的位姿控制。伸缩杆由舵机驱动，舵机型号为飞特STS3046，控制范围为0~360°，对应伸缩杆的伸缩长度为0~62.8mm。舵机采用菊花链连接，共计9个舵机由1个串口控制。每个吸附腔边缘装有3个激光测距传感器，可以反馈每个伸缩杆对应部分距底面的距离，传感器型号为ATK-VL53L0X，测量范围为3~200cm。所有激光测距传感器连接在一条总线上，采用I2C协议通信。
&emsp;&emsp;当机器人在曲率变化的表面移动时，吸附腔伸缩杆的长度会偏离预设值，根据传感器反馈的数据，驱动舵机将每个伸缩杆的偏离量控制在2cm之内，确保机器人的位姿平稳。
**2）吸附腔真空度控制**
&emsp;&emsp;吸附腔采用的风机型号为WM9250，吸附腔中安装了XGZP6857真空度传感器，量程为0~200kpa，真空度对应的输出电压为0~3.3V。
&emsp;&emsp;经测量真空度为13 kpa时，机器人可以稳定吸附且摩擦阻力适中。在控制真空度时使用了PID控制算法。
**3）舵轮运动控制**
&emsp;&emsp;舵轮有转向电机和驱动电机，使用TJA1057GT芯片构建CAN通信总线。电机的速度环和位置环均使用PID控制算法。
## 3.5   基于AprilTag标签视觉辅助定位系统
### 3.5.1 工作流程
&emsp;&emsp;在曲面移动吸附加工机器人上搭载工业相机，并在与其移动的空间一定角度范围内布置结构化环境二维码视觉标签，并且将视觉标签的位姿信息储存下来。实时获取视觉标签相对于相机的定位结果,通过坐标转换，得到相机相对于视觉标签的位姿信息。
### 3.5.2 工作原理
&emsp;&emsp;我们使用开源计算机视觉库OpenCV对图像进行预处理，结合本作品开发的算法，提取出标签四边形表示，只保留轮廓信息。
&emsp;&emsp;公式应用：
![公式](/all_static/media/markdown/43/images/2021/05/31/19/10/捕获.jpg "公式")
&emsp;&emsp;实施过程：
**1)** **相机标定**
&emsp;&emsp;预先调节好相机焦距并锁紧，使用标定板结合张正友标定法对相机进行标定，获取相机的内参并保存。
**2)** **拍摄图像**
&emsp;&emsp;保持相机和需要进行测量的April Tag标签相对静止，对标签拍摄完整图像。
**3)** **图像预处理**
&emsp;&emsp;对拍摄到的图像进行预处理，包括图像灰度化、图像去噪、图像边缘增强、图像二值化和边缘修补，提高特征提取、图像分割、匹配和识别的可靠性。
**4)** **读出透视校正和数据位**
&emsp;&emsp;根据提取到的角点图像坐标，读取标签编码信息，找到标签期望姿势和实际姿势之间的转换，锐化并最终解码数据位，即得到角点的世界坐标，利用坐标转换得到机器人的位姿。
### 3.5.3 原理流程图
![11](/all_static/media/markdown/43/images/2021/05/30/16/11/21.png "11")
&emsp;&emsp;图 11原理流程图
**误差来源：**
&emsp;&emsp;1）位置不同，受光程度不同，获取图像的灰度值有很大差异，进而在后来的图像处理部分对准确拟合标签的四个边造成了影响。
&emsp;&emsp;2）标签周围以及表面的反射光线和影像的特点也会影响标签的四个边的检测和识别。
&emsp;&emsp;3）摄像模块有抖动现象，致使获取的图像质量不高。
##  3.6   轨迹规划算法设计
### 3.6.1 路径规划方案
&emsp;&emsp;对于一块被选定的矩形待打磨区域，软件自主生成“弓字形”轨迹。
### 3.6.2  轨迹追踪
&emsp;&emsp;上位机软件将轨迹坐标发送给机器人，机器人结合具有位姿感知的磨抛执行器返回的位姿信息做闭环控制，避免重复打磨，实现高效的大尺寸表面打磨路径精确全覆盖。
# 第四部分  应用前景及社会效益
## 4.1   应用前景
&emsp;&emsp;本作品通过设计主-被动复合吸附机构解决负压吸附式机器人的变曲率吸附问题，通过设计具有位姿感知的磨抛执行器实现蒙皮高一致性打磨。本作品具有较强的吸附能力和定位精度，同时本作品的末端执行器可便捷地替换，因此本作品的应用范围可以扩展到其他领域，如：大型飞机表面探伤、风电叶片光整修复、船舶表面修复、桥梁维保等。更进一步，可以布置多个机器人组成集群加工系统，达到“蚂蚁啃骨头”的加工效果，最大化发挥出机器人加工工作时间长、工作效率高的优势，缩短加工周期。
[![](/all_static/media/markdown/43/images/2021/06/04/13/35/屏幕截图2021-06-04133515.png)](http://背景)
&emsp;&emsp;图 20应用领域示意图
## 4.2   社会效益
&emsp;&emsp;本项目提出的加工机器人在设计上并不局限于飞机蒙皮的打磨。能稳定吸附在变曲率表面的机器人平台可以搭载其它末端执行器进行相应的加工作业；同样的，具有位姿感知的恒力磨抛执行器也能进行系统化地更改，使该机器人能够在所有大尺寸、变曲率、全材质加工构件上进行不同种类加工作业，如航母底部附着物的清洗、核电设备的维护检测等耗时长且环境不适于人工作业的加工场景，目前在这些行业使用吸附式机器人加工的方式尚属空白。
&emsp;&emsp;综上来看，本作品在稳定吸附变曲率表面的基础上，克服了加工过程中的反作用力，同时集成位姿感知功能到末端执行器中。以此为基础提出的多机协同加工模式，可以在大量场景中替代传统人工加工，不仅能够降低加工过程的花销，并且可以提高加工效率，具有较好的社会效益。
# 第五部分  总结与展望
## 5.1   总结
&emsp;&emsp;本项目——大型飞行器变曲率蒙皮吸附式移动加工机器人系统，应用于飞机蒙皮磨抛。其主动顺应调整机构和被动顺应柔性吸附腔，克服了变曲率表面稳定吸附的难点；针对蒙皮尺寸大，设计具有位姿感知的恒力磨抛执行器实现全型面一致性打磨；
&emsp;&emsp;该作品以大型飞机蒙皮磨抛活化加工的实际需求为导向，解决了当前真空吸附式机器人难以在变曲率表面稳定吸附的问题。
## 5.2   展望
&emsp;&emsp;为更好服务于实际加工场景，结合现有的部分不足之处，未来还可对本作品进行如下优化：
&emsp;&emsp;1）当前作品风机噪声较大，未来可更换新型风机减小噪声；
&emsp;&emsp;2）当前作品打磨头仅能实现单自由度被动顺应，为更好保证打磨盘贴合曲面，可对打磨头进行三自由度被动顺应设计；
&emsp;&emsp;3）目前机器人功耗较大需连接外部电源进行供电，为进一步适应户外加工场景，可进一步优化耗电功耗，为采用自带电源方案打下基础；
&emsp;&emsp;4）目前本作品仅适用于水上加工场景，为更好适应船舶等有水下场景的加工构件，可在此作品的基础上进行两栖优化。